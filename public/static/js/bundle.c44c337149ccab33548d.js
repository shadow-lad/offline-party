(()=>{var e={10:e=>{function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-s:e+s}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},704:(e,t)=>{!function(e){"use strict";t.encode=function(t){var s,n=new Uint8Array(t),i=n.length,o="";for(s=0;s<i;s+=3)o+=e[n[s]>>2],o+=e[(3&n[s])<<4|n[s+1]>>4],o+=e[(15&n[s+1])<<2|n[s+2]>>6],o+=e[63&n[s+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var s,n,i,o,r,a=.75*t.length,c=t.length,h=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(s=0;s<c;s+=4)n=e.indexOf(t[s]),i=e.indexOf(t[s+1]),o=e.indexOf(t[s+2]),r=e.indexOf(t[s+3]),u[h++]=n<<2|i>>4,u[h++]=(15&i)<<4|o>>2,u[h++]=(3&o)<<6|63&r;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},767:e=>{function t(e){if(e)return function(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((s=n[i])===t||s.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(s){n=0;for(var i=(s=s.slice(0)).length;n<i;++n)s[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},227:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;t.splice(1,0,s,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,s)=>{e.exports=function(e){function t(e){let s,i=null;function o(...e){if(!o.enabled)return;const n=o,i=Number(new Date),r=i-(s||i);n.diff=r,n.prev=s,n.curr=i,s=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((s,i)=>{if("%%"===s)return"%";a++;const o=t.formatters[i];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===i?t.enabled(e):i,set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,s){const n=t(this.namespace+(void 0===s?":":s)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let s;t.save(e),t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(s=0;s<i;s++)n[s]&&("-"===(e=n[s].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let s,n;for(s=0,n=t.skips.length;s<n;s++)if(t.skips[s].test(e))return!1;for(s=0,n=t.names.length;s<n;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t),s|=0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},549:e=>{e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},983:(e,t,s)=>{const n=s(192);e.exports=(e,t)=>new n(e,t),e.exports.Socket=n,e.exports.protocol=n.protocol,e.exports.Transport=s(496),e.exports.transports=s(352),e.exports.parser=s(743)},192:(e,t,s)=>{const n=s(352),i=s(767),o=s(227)("engine.io-client:socket"),r=s(743),a=s(187),c=s(830);class h extends i{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=c.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){o('creating transport "%s"',e);const t=function(e){const t={};for(let s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}(this.opts.query);t.EIO=r.protocol,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return o("options: %j",s),new n[e](s)}open(){let e;if(this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void setTimeout((()=>{this.emit("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return o("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){o("setting transport %s",e.name),this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(e){o('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),s=!1;h.priorWebsocketSuccess=!1;const n=()=>{s||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(n=>{if(!s)if("pong"===n.type&&"probe"===n.data){if(o('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",t),!t)return;h.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{s||"closed"!==this.readyState&&(o("changing transport and sending upgrade packet"),u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emit("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{o('probe transport "%s" failed',e);const s=new Error("probe error");s.transport=t.name,this.emit("upgradeError",s)}})))};function i(){s||(s=!0,u(),t.close(),t=null)}const r=s=>{const n=new Error("probe error: "+s);n.transport=t.name,i(),o('probe transport "%s" failed because of error: %s',e,s),this.emit("upgradeError",n)};function a(){r("transport closed")}function c(){r("socket closed")}function l(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),i())}const u=()=>{t.removeListener("open",n),t.removeListener("error",r),t.removeListener("close",a),this.removeListener("close",c),this.removeListener("upgrading",l)};t.once("open",n),t.once("error",r),t.once("close",a),this.once("close",c),this.once("upgrading",l),t.open()}onOpen(){if(o("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){o("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,s){return this.sendPacket("message",e,t,s),this}send(e,t,s){return this.sendPacket("message",e,t,s),this}sendPacket(e,t,s,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof s&&(n=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const i={type:e,data:t,options:s};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),o("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.removeListener("upgrade",t),this.removeListener("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?s():e()})):this.upgrading?s():e()),this}onError(e){o("socket error %j",e),h.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let s=0;const n=e.length;for(;s<n;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}h.priorWebsocketSuccess=!1,h.protocol=r.protocol,e.exports=h},496:(e,t,s)=>{const n=s(743),i=s(767),o=s(227)("engine.io-client:transport");e.exports=class extends i{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const s=new Error(e);return s.type="TransportError",s.description=t,this.emit("error",s),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):o("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},352:(e,t,s)=>{const n=s(777),i=s(416),o=s(785),r=s(442);t.polling=function(e){let t,s=!1,r=!1;const a=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),s=e.hostname!==location.hostname||n!==e.port,r=e.secure!==t}if(e.xdomain=s,e.xscheme=r,t=new n(e),"open"in t&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},t.websocket=r},785:(e,t,s)=>{const n=s(15),i=s(549),o=/\n/g,r=/\\n/g;let a;e.exports=class extends n{constructor(e){super(e),this.query=this.query||{},a||(a=i.___eio=i.___eio||[]),this.index=a.length,a.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=e=>{this.onError("jsonp poll error",e)};const t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(e,t):(document.head||document.body).appendChild(e),this.script=e;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}doWrite(e,t){let s;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=s,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function n(){i(),t()}this.form.action=this.uri();const i=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(e){this.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+this.iframeId+'">';s=document.createElement(e)}catch(e){s=document.createElement("iframe"),s.name=this.iframeId,s.src="javascript:0"}s.id=this.iframeId,this.form.appendChild(s),this.iframe=s};i(),e=e.replace(r,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&n()}:this.iframe.onload=n}}},416:(e,t,s)=>{const n=s(777),i=s(15),o=s(767),{pick:r}=s(839),a=s(549),c=s(227)("engine.io-client:polling-xhr");function h(){}const l=null!=new n({xdomain:!1}).responseType;class u extends o{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=r(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new n(e);try{c("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=()=>{this.onLoad()},t.onerror=()=>{this.onError(t.responseText)}):t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():setTimeout((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},c("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=h:this.xhr.onreadystatechange=h,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(u.requestsCount=0,u.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",d);else if("function"==typeof addEventListener){addEventListener("onpagehide"in a?"pagehide":"unload",d,!1)}function d(){for(let e in u.requests)u.requests.hasOwnProperty(e)&&u.requests[e].abort()}e.exports=class extends i{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=l&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new u(this.uri(),e)}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e=>{this.onError("xhr post error",e)}))}doPoll(){c("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e=>{this.onError("xhr poll error",e)})),this.pollXhr=e}},e.exports.Request=u},15:(e,t,s)=>{const n=s(496),i=s(830),o=s(743),r=s(281),a=s(227)("engine.io-client:polling");e.exports=class extends n{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{a("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){a("pre-pause polling complete"),--e||t()}))),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){a("pre-pause writing complete"),--e||t()})))}else t()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){a("polling got data %s",e);o.decodePayload(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,o.encodePayload(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=r()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),e.length&&(e="?"+e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+e}}},866:(e,t,s)=>{const n=s(549);e.exports={WebSocket:n.WebSocket||n.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},442:(e,t,s)=>{const n=s(496),i=s(743),o=s(830),r=s(281),{pick:a}=s(839),{WebSocket:c,usingBrowserWebSocket:h,defaultBinaryType:l}=s(866),u=s(227)("engine.io-client:websocket"),d="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class p extends n{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,s=d?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=h&&!d?t?new c(e,t):new c(e):new c(e,t,s)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||l,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],n=t===e.length-1;i.encodePacket(s,this.supportsBinary,(e=>{const t={};if(!h&&(s.options&&(t.compress=s.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{h?this.ws.send(e):this.ws.send(e,t)}catch(e){u("websocket closed before onclose event")}n&&setTimeout((()=>{this.writable=!0,this.emit("drain")}),0)}))}}onClose(){n.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=r()),this.supportsBinary||(e.b64=1),e=o.encode(e),e.length&&(e="?"+e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+e}check(){return!(!c||"__initialize"in c&&this.name===p.prototype.name)}}e.exports=p},839:e=>{e.exports.pick=(e,...t)=>t.reduce(((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t)),{})},777:(e,t,s)=>{const n=s(58),i=s(549);e.exports=function(e){const t=e.xdomain,s=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!s&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},712:e=>{const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const s=Object.create(null);Object.keys(t).forEach((e=>{s[t[e]]=e}));e.exports={PACKET_TYPES:t,PACKET_TYPES_REVERSE:s,ERROR_PACKET:{type:"error",data:"parser error"}}},965:(e,t,s)=>{const{PACKET_TYPES_REVERSE:n,ERROR_PACKET:i}=s(712);let o;"function"==typeof ArrayBuffer&&(o=s(704));const r=(e,t)=>{if(o){const s=o.decode(e);return a(s,t)}return{base64:!0,data:e}},a=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const s=e.charAt(0);if("b"===s)return{type:"message",data:r(e.substring(1),t)};return n[s]?e.length>1?{type:n[s],data:e.substring(1)}:{type:n[s]}:i}},929:(e,t,s)=>{const{PACKET_TYPES:n}=s(712),i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,r=(e,t)=>{const s=new FileReader;return s.onload=function(){const e=s.result.split(",")[1];t("b"+e)},s.readAsDataURL(e)};e.exports=({type:e,data:t},s,a)=>{return i&&t instanceof Blob?s?a(t):r(t,a):o&&(t instanceof ArrayBuffer||(c=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?s?a(t instanceof ArrayBuffer?t:t.buffer):r(new Blob([t]),a):a(n[e]+(t||""));var c}},743:(e,t,s)=>{const n=s(929),i=s(965),o=String.fromCharCode(30);e.exports={protocol:4,encodePacket:n,encodePayload:(e,t)=>{const s=e.length,i=new Array(s);let r=0;e.forEach(((e,a)=>{n(e,!1,(e=>{i[a]=e,++r===s&&t(i.join(o))}))}))},decodePacket:i,decodePayload:(e,t)=>{const s=e.split(o),n=[];for(let e=0;e<s.length;e++){const o=i(s[e],t);if(n.push(o),"error"===o.type)break}return n}}},58:e=>{try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},824:e=>{var t=1e3,s=60*t,n=60*s,i=24*n,o=7*i,r=365.25*i;function a(e,t,s,n){var i=t>=1.5*s;return Math.round(e/s)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var h=typeof e;if("string"===h&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*r;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*s;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===h&&isFinite(e))return c.long?function(e){var o=Math.abs(e);if(o>=i)return a(e,o,i,"day");if(o>=n)return a(e,o,n,"hour");if(o>=s)return a(e,o,s,"minute");if(o>=t)return a(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=n)return Math.round(e/n)+"h";if(o>=s)return Math.round(e/s)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},830:(e,t)=>{t.encode=function(e){var t="";for(var s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t},t.decode=function(e){for(var t={},s=e.split("&"),n=0,i=s.length;n<i;n++){var o=s[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},187:e=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var n=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var r,a,c=t.exec(e||""),h={},l=14;l--;)h[s[l]]=c[l]||"";return-1!=i&&-1!=o&&(h.source=n,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=function(e,t){var s=/\/{2,9}/g,n=t.replace(s,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,h.path),h.queryKey=(r=h.query,a={},r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,s){t&&(a[t]=s)})),a),h}},751:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;const n=s(744),i=s(703),o=s(227)("socket.io-client");e.exports=t=a;const r=t.managers={};function a(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const s=n.url(e,t.path||"/socket.io"),a=s.source,c=s.id,h=s.path,l=r[c]&&h in r[c].nsps;let u;return t.forceNew||t["force new connection"]||!1===t.multiplex||l?(o("ignoring socket cache for %s",a),u=new i.Manager(a,t)):(r[c]||(o("new io instance for %s",a),r[c]=new i.Manager(a,t)),u=r[c]),s.query&&!t.query&&(t.query=s.queryKey),u.socket(s.path,t)}t.io=a;var c=s(485);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}}),t.connect=a;var h=s(703);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return h.Manager}});var l=s(277);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return l.Socket}}),t.default=a},703:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const n=s(983),i=s(277),o=s(485),r=s(657),a=s(10),c=s(791),h=s(227)("socket.io-client:manager");class l extends c.StrictEventEmitter{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||o;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(h("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=n(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=r.on(t,"open",(function(){s.onopen(),e&&e()})),o=r.on(t,"error",(t=>{h("error"),s.cleanup(),s._readyState="closed",this.emitReserved("error",t),e?e(t):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;h("connect attempt will timeout after %d",e),0===e&&i();const s=setTimeout((()=>{h("connect attempt timed out after %d",e),i(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){h("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(r.on(e,"ping",this.onping.bind(this)),r.on(e,"data",this.ondata.bind(this)),r.on(e,"error",this.onerror.bind(this)),r.on(e,"close",this.onclose.bind(this)),r.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){h("error",e),this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s||(s=new i.Socket(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return void h("socket %s is still active, skipping close",e)}this._close()}_packet(e){h("writing packet %j",e);const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){h("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){h("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){h("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();h("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const s=setTimeout((()=>{e.skipReconnect||(h("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(h("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(h("reconnect success"),e.onreconnect())})))}),t);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=l},657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,s){return e.on(t,s),function(){e.off(t,s)}}},277:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const n=s(485),i=s(657),o=s(791),r=s(227)("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class c extends o.StrictEventEmitter{constructor(e,t,s){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[i.on(e,"open",this.onopen.bind(this)),i.on(e,"packet",this.onpacket.bind(this)),i.on(e,"error",this.onerror.bind(this)),i.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(a.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const s={type:n.PacketType.EVENT,data:t,options:{}};s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(r("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),s.id=this.ids++);const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)?r("discard packet as the transport is not currently writable"):this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){r("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:n.PacketType.CONNECT,data:e})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){r("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case n.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(e);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(e);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];r("emitting event %j",t),null!=e.id&&(r("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,r("sending ack %j",i),t.packet({type:n.PacketType.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(r("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):r("bad ack %s",e.id)}onconnect(e){r("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){r("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(r("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}t.Socket=c},791:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;const n=s(767);t.StrictEventEmitter=class extends n{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t),this}emitReserved(e,...t){return super.emit(e,...t),this}listeners(e){return super.listeners(e)}}},744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const n=s(187),i=s(227)("socket.io-client:url");t.url=function(e,t="",s){let o=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==s?s.protocol+"//"+e:"https://"+e),i("parse %s",e),o=n(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const r=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+r+":"+o.port+t,o.href=o.protocol+"://"+r+(s&&s.port===o.port?"":":"+o.port),o}},719:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const n=s(986);function i(e,t){if(!e)return e;if(n.isBinary(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}if(Array.isArray(e)){const s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=i(e[n],t);return s}if("object"==typeof e&&!(e instanceof Date)){const s={};for(const n in e)e.hasOwnProperty(n)&&(s[n]=i(e[n],t));return s}return e}function o(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=o(e[s],t);else if("object"==typeof e)for(const s in e)e.hasOwnProperty(s)&&(e[s]=o(e[s],t));return e}t.deconstructPacket=function(e){const t=[],s=e.data,n=e;return n.data=i(s,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),e.attachments=void 0,e}},485:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const n=s(767),i=s(719),o=s(986),r=s(227)("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={}));t.Encoder=class{encode(e){return r("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!o.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),r("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=i.deconstructPacket(e),s=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(s),n}};class c extends n{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new h(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!o.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(void 0===a[s.type])throw new Error("unknown packet type "+s.type);if(s.type===a.BINARY_EVENT||s.type===a.BINARY_ACK){const n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(i)}if("/"===e.charAt(t+1)){const n=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}s.nsp=e.substring(n,t)}else s.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;for(;++t;){const s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!c.isPayloadValid(s.type,n))throw new Error("invalid payload");s.data=n}return r("decoded %s as %j",e,s),s}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=c;class h{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const s="function"==typeof ArrayBuffer,n=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);function r(e){return s&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||i&&e instanceof Blob||o&&e instanceof File}t.isBinary=r,t.hasBinary=function e(t,s){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(e(t[s]))return!0;return!1}if(r(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}},281:e=>{"use strict";var t,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n={},i=0,o=0;function r(e){var t="";do{t=s[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function a(){var e=r(+new Date);return e!==t?(i=0,t=e):e+"."+r(i++)}for(;o<64;o++)n[s[o]]=o;a.encode=r,a.decode=function(e){var t=0;for(o=0;o<e.length;o++)t=64*t+n[e.charAt(o)];return t},e.exports=a},728:(e,t,s)=>{"use strict";e.exports=s.p+"static/assets/img/upload.7220bdc2ec317a2a8a68.png"},98:(e,t,s)=>{"use strict";e.exports=s.p+"static/assets/img/video.865b04443ef4eb523031.png"}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}s.p="/",(()=>{"use strict";var e=s(98),t=s(728);const n=class{constructor({onValueChange:s}){(async()=>{let s="/assets/img/video.png",n="/assets/img/upload.png",i=await fetch(e);return i.ok&&(s=URL.createObjectURL(await i.blob())),i=await fetch(t),i.ok&&(n=URL.createObjectURL(await i.blob())),[s,n]})().then((([e,t])=>{this.video={url:e,text:"Click here or Drag and Drop File"},this.upload={url:t,text:"Drop Here"}})),this.inputContainer=document.querySelector("#input"),this.videoInput=document.querySelector("#videoInput"),this.img=this.inputContainer.querySelector("img"),this.videoInputText=this.inputContainer.querySelector("h1"),this.onValueChange=s,this.setListeners()}setImg({url:e,text:t}){this.img.src=e,this.videoInputText.innerText=t}setVideoImg(){this.setImg(this.video)}setUploadImg(){this.setImg(this.upload),console.log("here!")}setListeners(){this.videoInput.addEventListener("dragover",this.setUploadImg.bind(this)),this.videoInput.addEventListener("dragleave",this.setVideoImg.bind(this)),this.videoInput.addEventListener("drop",this.setVideoImg.bind(this)),this.videoInput.addEventListener("change",(()=>{this.setVideoImg(),this.inputContainer.remove(),this.onValueChange(URL.createObjectURL(this.videoInput.files[0]))}))}},i="play",o="seek",r="pause",a="server-message",c="client-message",h=e=>new Date(1e3*e).toISOString().substr(11,8);const l=class{constructor(e){for(var t of(this.videoContainer=document.querySelector(".video-container"),this.videoControls=this.videoContainer.querySelector(".video-controls"),this.videoOverlay=document.querySelector(".video-overlay"),this.video=document.querySelector("video"),this.videoContainerHasFocus=!0,this.controlsTimeout=null,this.progressBar=document.querySelector(".progress-bar"),this.progress=this.progressBar.querySelector(".progress"),this.seeker=this.progress.querySelector(".seeker"),this.fullscreenButton=document.querySelector("#fullscreen"),this.timeText=document.querySelector(".extra-text .time"),this.playbackButtons=document.querySelectorAll(".playback-controls button"),this.playbackButtons)){const e=t.dataset.action;"play-pause"===e&&(this.playPauseButton=t),"volume"===e&&(this.volumeButton=t)}this.volumeBar=document.querySelector(".volume-bar"),this.volume=this.volumeBar.querySelector(".volume"),this.volumeSeeker=this.volume.querySelector(".seeker"),this.volumeLevel=1,this.video.addEventListener("loadedmetadata",(()=>this.setTime(0))),this.video.src=e,this.initializeListeners(),this.videoContainer.focus()}displayInfoIcon(e){const t=document.createElement("div");t.classList.add("material-icons"),t.classList.add("icon-info"),t.innerHTML=e,this.videoContainer.appendChild(t),setTimeout((()=>t.remove()),1e3)}playVideo(){this.video.play()}pauseVideo(){this.video.pause()}onVideoPlayed(){this.playing=!0,this.onPlay&&this.onPlay(),this.playPauseButton.firstElementChild.innerText="pause",this.displayInfoIcon("play_arrow")}onVideoPaused(){this.playing=!1,this.onPause&&this.onPause(),this.playPauseButton.firstElementChild.innerText="play_arrow",this.displayInfoIcon("pause")}togglePlay(){this.videoContainer.focus();"play_arrow"===this.playPauseButton.firstElementChild.innerText?this.video.play():this.video.pause()}seekBy(e){this.videoContainer.focus(),this.seekTo(this.video.currentTime+e),10===e?this.displayInfoIcon("forward_10"):-10===e&&this.displayInfoIcon("replay_10")}seekTo(e){this.video.currentTime=e}seeking(e){const t=(e.clientX-this.progressBar.offsetLeft)/(this.progressBar.clientWidth-this.progressBar.offsetLeft)*this.video.duration;this.seekTo(t)}dragSeeker(e){const t=e.clientX-this.progressBar.clientLeft,s=this.progressBar.clientWidth;this.percentage=t/s,this.progress.style.width=100*this.percentage+"%",this.setTime(this.percentage)}dragSeekerFinish(){document.onmouseup=null,document.onmousemove=null,this.wasPlaying&&this.video.play(),this.seekTo(this.video.duration*this.percentage)}toggleFullscreen(){this.videoContainer.focus(),document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()}decreaseVolume(){this.video.volume<.05?this.setVolume(0):this.setVolume(this.video.volume-.05),this.displayInfoIcon("volume_down")}increaseVolume(){this.video.volume>.95?this.setVolume(1):this.setVolume(this.video.volume+.05),this.displayInfoIcon("volume_up")}setVolume(e,t=!1){e<0&&(e=0),e>1&&(e=1),this.volume.style.width=100*e+"%",this.video.volume=e,t||(this.volumeLevel=e);const s=0===e?"volume_mute":e<=.5?"volume_down":"volume_up";this.volumeButton.firstElementChild.innerText=s,t&&this.displayInfoIcon(s)}toggleMute(){this.videoContainer.focus(),"volume_mute"!==this.volumeButton.firstElementChild.innerText?this.setVolume(0,!0):this.setVolume(this.volumeLevel,!0)}changeVolume(e){const t=((e.clientX-this.volumeBar.offsetLeft)/this.volumeBar.clientWidth).toFixed(2);this.setVolume(t)}dragVolumeSeeker(e){const t=e.clientX-this.volumeBar.offsetLeft,s=this.volumeBar.clientWidth;if(t>s)return;const n=(t/s).toFixed(2);this.setVolume(n)}dragVolumeSeekerFinish(){document.onmouseup=null,document.onmousemove=null}setTime(e){const t=h(e*this.video.duration),s=h(this.video.duration);this.timeText.innerText=`${t} / ${s}`}getPlaybackFunction(e){switch(e){case"play-pause":return this.togglePlay.bind(this);case"forward":return()=>this.seekBy(10);case"rewind":return()=>this.seekBy(-10);case"volume":return this.toggleMute.bind(this)}}initializeControls(){this.fullscreenButton.addEventListener("click",this.toggleFullscreen.bind(this)),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement?(this.fullscreenButton.firstElementChild.innerText="fullscreen_exit",this.displayInfoIcon("fullscreen")):(this.fullscreenButton.firstElementChild.innerHTML="fullscreen",this.displayInfoIcon("fullscreen_exit"))})),this.progressBar.addEventListener("click",this.seeking.bind(this)),this.volumeBar.addEventListener("click",this.changeVolume.bind(this)),this.seeker.addEventListener("mousedown",(()=>{this.video.pause(),this.wasPlaying=this.playing,document.onmousemove=this.dragSeeker.bind(this),document.onmouseup=this.dragSeekerFinish.bind(this)})),this.volumeSeeker.addEventListener("mousedown",(()=>{document.onmousemove=this.dragVolumeSeeker.bind(this),document.onmouseup=this.dragVolumeSeekerFinish.bind(this)}));for(let e of this.playbackButtons){const t=e.dataset.action;e.addEventListener("click",this.getPlaybackFunction(t))}}initializeVideo(){this.video.addEventListener("timeupdate",(()=>{const e=this.video.currentTime/this.video.duration;this.progress.style.width=100*e+"%",this.setTime(e)})),this.video.addEventListener("play",this.onVideoPlayed.bind(this)),this.video.addEventListener("pause",this.onVideoPaused.bind(this)),this.video.addEventListener("seeked",(()=>this.onSeek&&this.onSeek(this.video.currentTime)))}initializeVideoContainer(){this.videoContainer.addEventListener("keyup",(e=>{" "!==e.key?"ArrowLeft"!==e.key?"ArrowRight"!==e.key?"f"!==e.key?"m"!==e.key?"ArrowUp"!==e.key?"ArrowDown"!==e.key||this.decreaseVolume():this.increaseVolume():this.toggleMute():this.toggleFullscreen():this.seekBy(10):this.seekBy(-10):this.togglePlay()})),this.videoContainer.addEventListener("blur",(()=>{this.videoContainerHasFocus=!1})),this.videoControls.addEventListener("click",(e=>{e.stopPropagation(),this.videoContainerHasFocus=!0})),this.videoContainer.addEventListener("mousemove",(()=>{this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.videoControls.style.transform="translateY(0)",this.controlsTimeout=setTimeout((()=>{this.videoControls.style.transform="translateY(100%)"}),2500)})),this.videoContainer.addEventListener("click",(()=>{if(!this.videoContainerHasFocus)return this.videoContainerHasFocus=!0;this.clickTimeout=setTimeout((()=>{this.prevent||this.togglePlay()}),200),this.prevent=!1})),this.videoContainer.addEventListener("dblclick",(()=>{clearTimeout(this.clickTimeout),this.prevent=!0,this.toggleFullscreen()}))}setOnPlay(e){this.onPlay=e}setOnPause(e){this.onPause=e}setOnSeek(e){this.onSeek=e}initializeListeners(){this.playing=!1,this.percentage=0,this.wasPlaying=this.playing,this.initializeVideo(),this.initializeControls(),this.initializeVideoContainer()}};var u=s(751);u.Manager,u.Socket;const d=u;const p=class{constructor({name:e,onConnect:t}){window.localStorage.setItem("name",e),this.name=e,this.socket=d(),this.connectedClients={},this.socket.emit("join",e),this.onConnect=t,this.shouldEmit=!0,this.initializeSocket()}onConnection(){this.onConnect(),this.id=this.socket.id,(e=>{const t=document.createElement("div");t.classList.add("toast-message"),t.innerText=`${e}`,document.body.appendChild(t),setTimeout((()=>{t.remove()}),5e3)})("Use F to toggle fullscreen")}onClientsEvent(e){this.connectedClients=e,this.onClients(e)}initializeSocket(){this.socket.on("connect",this.onConnection.bind(this)),this.socket.on(a,(e=>{this.addMessage(a,null,e)})),this.socket.on(c,(e=>{const t=e.from===this.socket.id?"You":this.connectedClients[e.from];this.addMessage(c,t,e.message)})),this.socket.on("clients",this.onClientsEvent.bind(this)),this.socket.on(i,(()=>{this.onPlay&&this.onPlay(),this.shouldEmit=!1})),this.socket.on(r,(()=>{this.onPause&&this.onPause(),this.shouldEmit=!1})),this.socket.on(o,(e=>{this.onSeek&&this.onSeek(e),this.shouldEmit=!1}))}onVideoPlayed(){this.shouldEmit&&this.socket.emit(i,null),this.shouldEmit=!0}onVideoPaused(){this.shouldEmit&&this.socket.emit(r,null),this.shouldEmit=!0}onVideoSeeked(e){this.shouldEmit&&this.socket.emit(o,e),this.shouldEmit=!0}setOnMessage(e){this.onMessage=e}setOnClients(e){this.onClients=e,e(this.connectedClients)}setOnPlay(e){this.onPlay=e}setOnPause(e){this.onPause=e}setOnSeek(e){this.onSeek=e}addMessage(e,t,s){this.onMessage&&this.onMessage({type:e,from:t,message:s})}sendMessage(e){this.socket.emit("message",e)}};const f=class{constructor(e){this.container=document.getElementById("main"),this.sendButton=document.getElementById("sendButton"),this.messageInput=document.getElementById("messageInput"),this.messageContainer=document.querySelector(".message-container"),this.clientsContainer=document.querySelector(".clients-container");let t=window.localStorage.getItem("name")||"";for(;!t;)t=prompt("Enter a username");this.container.classList.remove("hide"),this.client=new p({name:t,onConnect:()=>this.initializeListeners(e)})}appendMessage({type:e,from:t,message:s}){const n=document.createElement("div");n.classList.add(e),e===a?n.innerText=s:n.innerHTML=`<p>${t}</p><p>${s}</p>`,this.messageContainer.prepend(n)}setClients(e){const t=Object.keys(e);this.clientsContainer.innerHTML="",t.forEach((t=>{const s=document.createElement("div");s.innerHTML=t===this.client.id?"You":e[t],this.clientsContainer.appendChild(s)}))}initializeChat(){this.messageInput.addEventListener("keyup",(e=>"Enter"===e.key&&this.sendButton.click())),this.sendButton.addEventListener("click",(()=>{console.log("clicked");const e=this.messageInput.value.trim();e&&(this.messageInput.value="",this.client.sendMessage(e))}))}initializeClient(){this.client.setOnMessage(this.appendMessage.bind(this)),this.client.setOnClients(this.setClients.bind(this)),this.client.setOnPlay((()=>this.videoPlayer.playVideo())),this.client.setOnPause((()=>this.videoPlayer.pauseVideo())),this.client.setOnSeek((e=>this.videoPlayer.seekTo(e)))}initializeVideoPlayer(){this.videoPlayer.setOnPlay((()=>this.client.onVideoPlayed())),this.videoPlayer.setOnPause((()=>this.client.onVideoPaused())),this.videoPlayer.setOnSeek((e=>this.client.onVideoSeeked(e)))}initializeListeners(e){this.videoPlayer=new l(e),this.initializeChat(),this.initializeVideoPlayer(),this.initializeClient()}};document.body.onload=function(){document.querySelector("main").classList.remove("hide"),new n({onValueChange:e=>{new f(e)}})}})()})();